<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farming Guidebook</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e4d92, #2ecc71);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        h1 {
            color: #2ecc71;
            font-size: 2.5rem;
        }

        .back-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        .search-box {
            width: 100%;
            padding: 1rem;
            border: 2px solid #2ecc71;
            border-radius: 10px;
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .category {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .category h2 {
            color: #2ecc71;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .crop-list {
            list-style: none;
        }

        .crop-item {
            padding: 0.8rem;
            margin: 0.5rem 0;
            background: rgba(46, 204, 113, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .crop-item:hover {
            background: rgba(46, 204, 113, 0.2);
            transform: translateX(5px);
        }

        .crop-details {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .crop-details.active {
            display: block;
        }

        .crop-content {
            background: white;
            width: 90%;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 15px;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .guide-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(46, 204, 113, 0.1);
            border-radius: 10px;
        }

        .guide-section h3 {
            color: #2ecc71;
            margin-bottom: 1rem;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .guide-section h3:before {
            content: "üå±";
            font-size: 1.5rem;
        }

        .key-points {
            background: #fff3cd;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .key-points h4 {
            color: #856404;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .key-points h4:before {
            content: "üí°";
        }

        .important-note {
            background: #d4edda;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 4px solid #2ecc71;
        }

        .important-note h4 {
            color: #2ecc71;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .important-note h4:before {
            content: "‚ö†Ô∏è";
        }

        .loading {
            text-align: center;
            padding: 2rem;
        }

        .loading img {
            width: 50px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Farming Guidebook</h1>
            <a href="main.html" class="back-btn">
                <img src="farm-logo.svg" alt="Farm Logo" width="24" height="24">
                <img src="back.svg" alt="Back" width="20">
                Back to Hub
            </a>
        </div>

        <input type="text" class="search-box" placeholder="Search for crops..." id="searchInput">

        <div class="categories">
            <div class="category">
                <h2>üåæ Cereals</h2>
                <ul class="crop-list">
                    <li class="crop-item">Rice</li>
                    <li class="crop-item">Wheat</li>
                    <li class="crop-item">Maize (Corn)</li>
                    <li class="crop-item">Barley</li>
                    <li class="crop-item">Bajra (Pearl Millet)</li>
                    <li class="crop-item">Jowar (Sorghum)</li>
                    <li class="crop-item">Ragi (Finger Millet)</li>
                </ul>
            </div>

            <div class="category">
                <h2>üå± Pulses</h2>
                <ul class="crop-list">
                    <li class="crop-item">Gram (Chickpea)</li>
                    <li class="crop-item">Tur (Pigeon Pea)</li>
                    <li class="crop-item">Moong (Green Gram)</li>
                    <li class="crop-item">Urad (Black Gram)</li>
                    <li class="crop-item">Masoor (Lentil)</li>
                </ul>
            </div>

            <div class="category">
                <h2>üõ¢Ô∏è Oilseeds</h2>
                <ul class="crop-list">
                    <li class="crop-item">Groundnut</li>
                    <li class="crop-item">Soybean</li>
                    <li class="crop-item">Mustard</li>
                    <li class="crop-item">Sunflower</li>
                    <li class="crop-item">Sesame (Til)</li>
                    <li class="crop-item">Castor Seed</li>
                    <li class="crop-item">Linseed</li>
                    <li class="crop-item">Safflower</li>
                </ul>
            </div>

            <div class="category">
                <h2>üåø Fiber Crops</h2>
                <ul class="crop-list">
                    <li class="crop-item">Cotton</li>
                    <li class="crop-item">Jute</li>
                    <li class="crop-item">Mesta</li>
                </ul>
            </div>

            <div class="category">
                <h2>üçØ Cash Crops</h2>
                <ul class="crop-list">
                    <li class="crop-item">Sugarcane</li>
                    <li class="crop-item">Tea</li>
                    <li class="crop-item">Coffee</li>
                    <li class="crop-item">Rubber</li>
                    <li class="crop-item">Coconut</li>
                    <li class="crop-item">Arecanut (Betel Nut)</li>
                    <li class="crop-item">Tobacco</li>
                </ul>
            </div>

            <div class="category">
                <h2>üå∂Ô∏è Spices</h2>
                <ul class="crop-list">
                    <li class="crop-item">Black Pepper</li>
                    <li class="crop-item">Cardamom</li>
                    <li class="crop-item">Clove</li>
                    <li class="crop-item">Cinnamon</li>
                    <li class="crop-item">Nutmeg</li>
                    <li class="crop-item">Turmeric</li>
                    <li class="crop-item">Ginger</li>
                    <li class="crop-item">Coriander</li>
                    <li class="crop-item">Fenugreek</li>
                    <li class="crop-item">Cumin</li>
                    <li class="crop-item">Fennel</li>
                    <li class="crop-item">Ajwain (Carom Seeds)</li>
                    <li class="crop-item">Chilli</li>
                </ul>
            </div>

            <div class="category">
                <h2>ü•¨ Vegetables</h2>
                <ul class="crop-list">
                    <li class="crop-item">Onion</li>
                    <li class="crop-item">Garlic</li>
                    <li class="crop-item">Potato</li>
                    <li class="crop-item">Sweet Potato</li>
                    <li class="crop-item">Tomato</li>
                    <li class="crop-item">Brinjal (Eggplant)</li>
                    <li class="crop-item">Cabbage</li>
                    <li class="crop-item">Cauliflower</li>
                    <li class="crop-item">Ladyfinger (Okra)</li>
                    <li class="crop-item">Carrot</li>
                    <li class="crop-item">Radish</li>
                    <li class="crop-item">Beetroot</li>
                    <li class="crop-item">Pumpkin</li>
                    <li class="crop-item">Cucumber</li>
                    <li class="crop-item">Bottle Gourd</li>
                    <li class="crop-item">Bitter Gourd</li>
                    <li class="crop-item">Ridge Gourd</li>
                    <li class="crop-item">Ash Gourd</li>
                </ul>
            </div>

            <div class="category">
                <h2>üçé Fruits</h2>
                <ul class="crop-list">
                    <li class="crop-item">Watermelon</li>
                    <li class="crop-item">Muskmelon</li>
                    <li class="crop-item">Papaya</li>
                    <li class="crop-item">Banana</li>
                    <li class="crop-item">Mango</li>
                    <li class="crop-item">Guava</li>
                    <li class="crop-item">Apple</li>
                    <li class="crop-item">Pear</li>
                    <li class="crop-item">Plum</li>
                    <li class="crop-item">Cherry</li>
                    <li class="crop-item">Litchi</li>
                    <li class="crop-item">Pomegranate</li>
                    <li class="crop-item">Custard Apple</li>
                    <li class="crop-item">Sapota (Chikoo)</li>
                    <li class="crop-item">Pineapple</li>
                    <li class="crop-item">Jackfruit</li>
                    <li class="crop-item">Grapes</li>
                    <li class="crop-item">Orange</li>
                    <li class="crop-item">Lemon</li>
                    <li class="crop-item">Mosambi (Sweet Lime)</li>
                    <li class="crop-item">Strawberry</li>
                    <li class="crop-item">Blueberry</li>
                    <li class="crop-item">Raspberry</li>
                    <li class="crop-item">Fig</li>
                </ul>
            </div>

            <div class="category">
                <h2>ü•ú Nuts</h2>
                <ul class="crop-list">
                    <li class="crop-item">Cashew Nut</li>
                    <li class="crop-item">Almond</li>
                    <li class="crop-item">Walnut</li>
                    <li class="crop-item">Pistachio</li>
                </ul>
            </div>

            <div class="category">
                <h2>üåø Medicinal & Others</h2>
                <ul class="crop-list">
                    <li class="crop-item">Betel Leaves</li>
                    <li class="crop-item">Drumstick (Moringa)</li>
                    <li class="crop-item">Spinach</li>
                    <li class="crop-item">Fenugreek Leaves</li>
                    <li class="crop-item">Amaranthus</li>
                    <li class="crop-item">Coriander Leaves</li>
                    <li class="crop-item">Mint</li>
                    <li class="crop-item">Tulsi (Holy Basil)</li>
                    <li class="crop-item">Aloe Vera</li>
                    <li class="crop-item">Bamboo</li>
                    <li class="crop-item">Henna (Mehendi)</li>
                </ul>
            </div>
        </div>

        <div class="crop-details" id="cropDetails">
            <div class="crop-content">
                <button class="close-modal" onclick="closeGuide()">&times;</button>
                <div class="loading">
                    <img src="loading.webp" alt="Loading">
                    <p>Loading crop information...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const Api_Url = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBo3T4eKrSp6uFIUE8UPWHxwP0qA_6iZZg";

        // Add click event listeners to all crop items
        document.querySelectorAll('.crop-item').forEach(item => {
            item.addEventListener('click', async () => {
                const cropName = item.textContent;
                const cropDetails = document.getElementById('cropDetails');
                cropDetails.classList.add('active');
                
                // Show loading state
                cropDetails.innerHTML = `
                    <div class="crop-content">
                        <button class="close-modal" onclick="closeGuide()">&times;</button>
                        <div class="loading">
                            <img src="loading.webp" alt="Loading">
                            <p>Loading information for ${cropName}...</p>
                        </div>
                    </div>
                `;

                try {
                    const prompt = `Provide a detailed farming guide for ${cropName}. Include the following sections:
                    1. Introduction and Overview
                    2. Climate and Soil Requirements
                    3. Land Preparation
                    4. Planting/Sowing Process
                    5. Growth Stages and Care
                    6. Irrigation Requirements
                    7. Fertilizer and Nutrient Management
                    8. Pest and Disease Management
                    9. Harvesting Process
                    10. Post-Harvest Management
                    11. Common Problems and Solutions
                    12. Best Practices and Tips

                    For each section:
                    - Provide clear, concise information
                    - Include key points in bullet format
                    - Highlight important notes or warnings
                    - Add practical tips where relevant
                    
                    Format the response with clear section headings and bullet points.`;

                    const response = await fetch(Api_Url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: prompt }]
                            }]
                        })
                    });

                    const data = await response.json();
                    const guide = data.candidates[0].content.parts[0].text;
                    
                    // Format and display the guide with sections
                    const sections = guide.split('\n\n').filter(section => section.trim());
                    cropDetails.innerHTML = `
                        <div class="crop-content">
                            <button class="close-modal" onclick="closeGuide()">&times;</button>
                            <h2>${cropName} Farming Guide</h2>
                            ${sections.map(section => {
                                const title = section.split('\n')[0];
                                const content = section.split('\n').slice(1).join('\n');
                                return `
                                    <div class="guide-section">
                                        <h3>${title}</h3>
                                        ${content.split('\n').map(line => {
                                            if (line.trim().startsWith('Key Points:')) {
                                                return `
                                                    <div class="key-points">
                                                        <h4>Key Points</h4>
                                                        <ul>
                                                            ${line.split('Key Points:')[1].split(',').map(point => 
                                                                `<li>${point.trim()}</li>`
                                                            ).join('')}
                                                        </ul>
                                                    </div>
                                                `;
                                            } else if (line.trim().startsWith('Important:')) {
                                                return `
                                                    <div class="important-note">
                                                        <h4>Important Note</h4>
                                                        <p>${line.split('Important:')[1].trim()}</p>
                                                    </div>
                                                `;
                                            } else if (line.trim()) {
                                                return `<p>${line.trim()}</p>`;
                                            }
                                            return '';
                                        }).join('')}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    `;
                } catch (error) {
                    console.error('Error:', error);
                    cropDetails.innerHTML = `
                        <div class="crop-content">
                            <button class="close-modal" onclick="closeGuide()">&times;</button>
                            <h2>Error Loading Guide</h2>
                            <p>Sorry, there was an error loading the farming guide for ${cropName}. Please try again later.</p>
                        </div>
                    `;
                }
            });
        });

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.crop-item').forEach(item => {
                const cropName = item.textContent.toLowerCase();
                item.style.display = cropName.includes(searchTerm) ? 'block' : 'none';
            });
        });

        // Function to close the guide modal
        function closeGuide() {
            document.getElementById('cropDetails').classList.remove('active');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('cropDetails');
            if (event.target === modal) {
                closeGuide();
            }
        }
    </script>
</body>
</html> 